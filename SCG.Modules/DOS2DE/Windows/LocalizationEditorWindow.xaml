<win:HideWindowBase x:Class="SCG.Modules.DOS2DE.Windows.LocalizationEditorWindow"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:local="clr-namespace:SCG.Modules.DOS2DE.Windows"
		xmlns:data="clr-namespace:SCG.Modules.DOS2DE.Data.View"
		xmlns:conv="clr-namespace:SCG.Converters;assembly=SourceControlGenerator"
		xmlns:win="clr-namespace:SCG.Windows;assembly=SourceControlGenerator"
		xmlns:dgx="urn:tom-englert.de/DataGridExtensions"
		mc:Ignorable="d"
		d:DataContext="{d:DesignInstance data:LocalizationEditorDesignData, IsDesignTimeCreatable=True}"
		Title="LocalizationEditorWindow" Height="450" Width="800">
	<win:HideWindowBase.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="pack://application:,,,/SourceControlGenerator;component/ThemeSystem/ResourceDictionary/MainAppDictionary.xaml" />
			</ResourceDictionary.MergedDictionaries>

			<dgx:RegexContentFilterFactory x:Key="RegexContentFilterFactory" />

			<Style x:Key="DataGrid_NoHighlight" TargetType="DataGridCell">
				<Style.Triggers>
					<Trigger  Property="IsSelected" Value="true">
						<Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
						<Setter Property="Background" Value="{x:Null}" />
						<Setter Property="BorderBrush" Value="{x:Null}" />
					</Trigger>
				</Style.Triggers>
			</Style>
			<DataTemplate x:Key="LocaleEntryGrid">
				<DataGrid ItemsSource="{Binding Entries}" 
					FrozenColumnCount="1" BorderThickness="0"
					AutoGenerateColumns="False" CanUserAddRows="True"
					CanUserDeleteRows="True" CanUserResizeRows="True"
					VirtualizingPanel.IsVirtualizingWhenGrouping="True"
					dgx:DataGridFilter.IsAutoFilterEnabled="True"
					dgx:DataGridFilter.ContentFilterFactory="{StaticResource RegexContentFilterFactory}"
				>
					<DataGrid.Columns>
						<DataGridTemplateColumn MinWidth="25" CanUserResize="False" dgx:DataGridFilterColumn.IsFilterVisible="False" >
							<DataGridTemplateColumn.Header>
								<CheckBox Checked="Entries_SelectAll" Unchecked="Entries_SelectNone" ToolTip="Select/Deselect All" />
							</DataGridTemplateColumn.Header>
							<DataGridTemplateColumn.CellStyle>
								<Style TargetType="{x:Type DataGridCell}" BasedOn="{StaticResource DataGrid_NoHighlight}">
									<Setter Property="Margin" Value="0" />
								</Style>
							</DataGridTemplateColumn.CellStyle>
							<DataGridTemplateColumn.CellTemplate>
								<DataTemplate>
									<CheckBox x:Name="ProjectSelectedCheckbox" IsChecked="{Binding Selected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Center" VerticalAlignment="Center"
							  IsEnabled="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGridRow}},Path=IsSelected,Mode=OneWay}"
							  />
								</DataTemplate>
							</DataGridTemplateColumn.CellTemplate>
						</DataGridTemplateColumn>
						<DataGridTextColumn Header="Key" Binding="{Binding Key}" MinWidth="50" Width="Auto" >
							<DataGridTextColumn.CellStyle>
								<Style TargetType="DataGridCell" BasedOn="{StaticResource DataGrid_NoHighlight}">
									<Setter Property="ToolTip" Value="{Binding ModuleInfo.Folder}" />
								</Style>
							</DataGridTextColumn.CellStyle>
						</DataGridTextColumn>
						<DataGridTextColumn Header="Content" Binding="{Binding Content}" MinWidth="50" />
						<DataGridTextColumn Header="Handle" Binding="{Binding Handle}" MinWidth="50" />
					</DataGrid.Columns>
				</DataGrid>
			</DataTemplate>
			<DataTemplate x:Key="LocaleFileTabs">
				<Grid>
					<TabControl 
						ItemsSource="{Binding Data}" 
						DisplayMemberPath="Name" TabStripPlacement="Left" 
						ContentTemplate="{Binding Source={StaticResource LocaleEntryGrid}}" 
					/>
				</Grid>
			</DataTemplate>
			<DataTemplate x:Key="LocaleGroupTab">
				<TabItem Header="{Binding Name}" Visibility="{Binding Visibility, Converter={StaticResource BoolToVisibilityConverter}}"/>
			</DataTemplate>
		</ResourceDictionary>
	</win:HideWindowBase.Resources>
	<Grid>
		<TabControl ItemsSource="{Binding Groups}" ContentTemplate="{Binding Source={StaticResource LocaleFileTabs}}"
					SelectedItem="{Binding SelectedGroup}"
			>
			<TabControl.ItemContainerStyle>
				<Style TargetType="TabItem">
					<Setter Property="Visibility" Value="{Binding Visibility, Converter={StaticResource BoolToVisibilityConverter}}"/>
					<Setter Property="Header" Value="{Binding Name}"/>
				</Style>
			</TabControl.ItemContainerStyle>
		</TabControl>
	</Grid>
</win:HideWindowBase>
